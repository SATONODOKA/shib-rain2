# 営業ナレッジベース RAGシステム 💼

法人向け研修事業の営業支援AIアシスタント

## 🎯 概要

このRAGシステムは、法人向け研修事業の営業担当者向けに開発された知識検索・回答生成システムです。内部の営業資料（PDF/PPT/DOCX/MD/TXT）を自動でインデックス化し、ChatGPT風のUIで即座に関連情報を検索・回答できます。

### 主な特徴

- 📚 **多様なファイル形式対応**: MD、TXT、DOCX（将来的にPDF/PPT追加予定）
- 🔍 **高精度検索**: 多言語対応の埋め込みモデル（multilingual-e5-small）
- 💬 **ChatGPT風UI**: Streamlitベースの直感的なインターフェース
- 🤖 **AI回答生成**: LM Studio統合（オプション）
- 📊 **詳細な出典表示**: 類似度スコア付きで情報ソースを明示
- 🔄 **堅牢なエラーハンドリング**: LM Studio未接続でも検索機能は動作

## 🛠 技術構成

### システム構成
```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   Streamlit     │    │   ChromaDB       │    │   LM Studio     │
│   (フロントエンド)   │◄──►│  (ベクトルDB)     │    │   (LLM生成)     │
└─────────────────┘    └──────────────────┘    └─────────────────┘
                              ▲
                              │
                    ┌──────────────────┐
                    │ sentence-trans   │
                    │ (埋め込みモデル)    │
                    └──────────────────┘
```

### 使用技術
- **フロントエンド**: Streamlit
- **ベクトルDB**: ChromaDB (ローカル永続化)
- **埋め込みモデル**: sentence-transformers (`intfloat/multilingual-e5-small`)
- **LLM**: LM Studio (OpenAI互換API) ※オプション
- **言語**: Python 3.9+

## 📦 インストール

### 必要要件
- Python 3.9以上
- 16GB RAM推奨

### 1. リポジトリのクローン
```bash
git clone https://github.com/SATONODOKA/shib-rain2.git
cd shib-rain2
```

### 2. 依存関係のインストール
```bash
pip install streamlit chromadb openai requests sentence-transformers
```

### 3. アプリケーションの起動
```bash
streamlit run rag_system.py
```

ブラウザで `http://localhost:8501` にアクセスしてください。

## 🚀 使用方法

### 基本的な使い方

1. **ドキュメント読み込み**
   - サイドバーの「📚 ドキュメント読み込み」ボタンをクリック
   - `sample_documents/` フォルダ内のファイルが自動でインデックス化されます

2. **質問・検索**
   - メインエリアのテキストボックスに質問を入力
   - 「🔍 質問する」ボタンをクリック

3. **結果の確認**
   - AI回答と参考にした情報源が表示されます
   - 「📋 参考にした情報」で詳細な検索結果を確認可能

### 質問例
- 新任管理職研修の料金は？
- トヨタ自動車様の課題は？ 
- 競合他社との差別化ポイントは？
- 建設業界向けの研修内容は？

## 📁 ファイル構成

```
📦 shib-rain2/
├── 📄 rag_system.py          # メインアプリケーション
├── 📄 debug_rag.py           # デバッグ・テスト用スクリプト
├── 📁 sample_documents/      # サンプル営業資料
│   ├── 商品カタログ_リーダーシップ研修.md
│   ├── 提案書_大成建設様_マネジメント変革プログラム.md
│   ├── ヒアリング記録_トヨタ自動車様_若手定着率向上.md
│   ├── 営業資料_マネジメント研修サービス概要.pptx.md
│   ├── 競合比較分析_マネジメント研修市場.md
│   ├── 営業規則_法人向け研修事業部.txt
│   ├── 研修効果測定レポート_ABC商事様.md
│   ├── 価格表_2024年度法人研修サービス.md
│   └── 成功事例_三菱商事様_グローバルリーダー育成.docx.md
├── 📁 chroma_db/            # ChromaDBデータ（自動生成）
└── 📄 README.md
```

## ⚙️ 詳細設定

### LM Studioの設定（オプション）

より高品質なAI回答を得るには：

1. [LM Studio](https://lmstudio.ai/)をダウンロード・インストール
2. `gpt-oss-20b`などのモデルをダウンロード
3. ローカルサーバーをポート1234で起動
4. システム状態が「✅ LM Studio 接続OK」になることを確認

### カスタムドキュメントの追加

1. `sample_documents/`フォルダに以下の形式でファイルを追加：
   - Markdown (`.md`)
   - テキスト (`.txt`) 
   - Word文書 (`.docx.md` - 事前にMarkdownに変換)

2. 「📚 ドキュメント読み込み」を再実行

## 🧪 開発・デバッグ

### デバッグスクリプトの実行
```bash
python debug_rag.py
```

ChromaDBの状態確認、ドキュメント読み込みテスト、検索精度の検証ができます。

### システム設定
- **チャンクサイズ**: 1000文字
- **チャンクオーバーラップ**: 200文字  
- **検索結果数**: Top-3
- **類似度閾値**: なし（距離ベース）

## 📊 性能・制限事項

### 性能指標
- **検索応答時間**: ~1-2秒
- **ドキュメント処理**: ~10ファイル/分
- **メモリ使用量**: ~2-4GB（モデル読み込み時）

### 制限事項
- 現在対応: MD/TXT/DOCX（Markdown変換済み）
- PDF/PPTXは将来実装予定
- 日本語特化（多言語も部分対応）
- ローカル実行のみ（クラウド未対応）

## 🔄 今後の拡張予定

### Phase 2: ファイル処理機能
- [ ] PDF自動テキスト抽出
- [ ] PowerPoint自動変換
- [ ] Word文書直接読み込み

### Phase 3: UI/UX改善  
- [ ] Difyフロントエンド統合
- [ ] チャット履歴機能
- [ ] ファイルアップロード機能

### Phase 4: 高度な機能
- [ ] Web検索統合
- [ ] 多言語対応強化
- [ ] クラウドデプロイ対応

## 🤝 開発者情報

### 開発期間
3日間（2024年8月15日 - 17日）

### 開発アプローチ
- 最小構成から段階的機能追加
- エラー耐性重視の設計
- 実用性優先の技術選択

## 📝 ライセンス

MIT License

## 🙏 謝辞

このプロジェクトは以下のオープンソースプロジェクトを活用しています：
- [Streamlit](https://streamlit.io/)
- [ChromaDB](https://www.trychroma.com/)
- [Sentence Transformers](https://www.sbert.net/)
- [LM Studio](https://lmstudio.ai/)

---

**⚡ 営業効率を革新する、次世代AIナレッジシステム** 